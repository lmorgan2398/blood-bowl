(()=>{"use strict";var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{addTeam:()=>c,assignRanks:()=>p,createTeam:()=>d,getTeamByID:()=>m,getTeamByTicker:()=>i,getTeams:()=>a,rehydrateTeams:()=>r,removeTeamByID:()=>u,setTeams:()=>l});var n={};e.r(n),e.d(n,{addBonus:()=>x,applyBonuses:()=>O,createBonus:()=>A,getBonuses:()=>L,removeBonusByID:()=>H,setBonuses:()=>U});var s={};e.r(s),e.d(s,{addMatch:()=>_,createMatch:()=>J,getMatchByID:()=>F,getMatches:()=>R,removeMatchByID:()=>z,setMatches:()=>j,updateRecords:()=>V});let o=[];const a=()=>o,l=e=>o=e,d=(e,t,n,s)=>{let o=crypto.randomUUID();return{name:e,race:t,coach:n,ticker:s,wins:0,draws:0,losses:0,leaguePoints:0,rank:1,get record(){return`${this.wins}-${this.draws}-${this.losses}`},id:o}},r=e=>e.map((e=>{const t=d(e.name,e.race,e.coach,e.ticker);return t.id=e.id,t.wins=e.wins,t.draws=e.draws,t.losses=e.losses,t.leaguePoints=e.leaguePoints,t.rank=e.rank??null,t})),c=e=>o.push(e),i=e=>o.find((t=>t.ticker===e)),m=e=>o.find((t=>t.id===e)),u=e=>{o.forEach(((t,n)=>{e===t.id&&o.splice(n,1)}))},p=()=>{let e=Array.from(o);for(let t=0;t<e.length;t++){let n=e[t].leaguePoints,s=t;for(let o=t+1;o<e.length;o++)e[o].leaguePoints>n&&(n=e[o].leaguePoints,s=o);let o=e[s];e[s]=e[t],e[t]=o}e.forEach(((e,t)=>{e.rank=t+1})),console.log(e),l(e)};let g=document.querySelector("#teams tbody");const h=e=>{for(;g.firstChild;)g.removeChild(g.firstChild);e.forEach((e=>{let t=document.createElement("tr");g.appendChild(t),t.dataset.teamId=e.id;let n=document.createElement("td");t.appendChild(n),n.textContent=e.rank;let s=document.createElement("td");t.appendChild(s),s.textContent=e.name;let o=document.createElement("td");t.appendChild(o),o.textContent=e.record;let a=document.createElement("td");t.appendChild(a),a.textContent=e.leaguePoints}))};let y=document.querySelector("#matches tbody");const f=e=>{for(;y.firstChild;)y.removeChild(y.firstChild);e.forEach((e=>{const t=document.createElement("tr");y.appendChild(t),t.dataset.matchId=e.id;const n=e.teams.find((e=>e.isHome)),s=e.teams.find((e=>!e.isHome)),o=m(n.id)?.name||"Unknown",a=m(s.id)?.name||"Unknown",l=document.createElement("td");l.textContent=o,t.appendChild(l);const d=document.createElement("td");d.textContent=`${n.tds}-${s.tds}`,t.appendChild(d);const r=document.createElement("td");r.textContent=a,t.appendChild(r)}))},E=document.getElementById("home-select"),v=document.getElementById("away-select"),w=document.getElementById("team-details-dialog"),$=document.getElementById("match-details-dialog"),b=document.getElementById("team-details-body"),B=document.getElementById("match-details-body");let k=null,C=null;const I=document.querySelectorAll("input"),P=document.querySelectorAll('input[type="number"]'),S=document.querySelectorAll("select"),T=document.querySelectorAll('input[type="checkbox"]'),D=()=>{I.forEach((e=>{e.value=" "})),P.forEach((e=>{e.value=0})),S.forEach((e=>{e.selectedIndex=0})),T.forEach((e=>{e.checked=!1}))},M=e=>e.charAt(0).toUpperCase()+e.slice(1);let q=[];const L=()=>q,U=e=>q=e,A=(e,t,n,s)=>({name:e,type:t,count:n,points:s,id:crypto.randomUUID()}),x=e=>q.push(e),H=e=>{q.forEach(((t,n)=>{e===t.id&&q.splice(n,1)}))},O=(e,t,n,s,o)=>{let a=0,l=[];return q.forEach((d=>{const r="opponent TDs"==d.type&&e<=d.count||"opponent casualties"==d.type&&t>=d.count||"passes"==d.type&&n>=d.count,c="painted"==d.type&&s||"underdog"==d.type&&o;r?(a+=d.points,l.push(`${d.name}: +${d.points} points for ${d.count} ${d.type}`)):c&&l.push(`${d.name}: +${d.points} points`)})),{points:a,appliedBonuses:l}};let N=[];const R=()=>N,j=e=>N=e,J=(e,t,n,s,o,a,l,d,r,c,i,m,u)=>{let p=crypto.randomUUID(),g="draw",h="draw",y=0,f=0;n>s?(g="win",y+=3,h="loss",f+=1):n<s?(g="loss",y+=1,h="win",f+=3):(y+=2,f+=2);let E=O(s,d,o,r,i),v=O(n,l,a,c,m),w=E.points,$=f+v.points;return{date:u,id:p,teams:[{id:e,tds:n,casualties:l,passes:o,result:g,leaguePoints:y+w,bonusesApplied:E.appliedBonuses,isHome:!0},{id:t,tds:s,casualties:d,passes:a,result:h,leaguePoints:$,bonusesApplied:v.appliedBonuses,isHome:!1}]}},_=e=>N.push(e),z=e=>{N.forEach(((t,n)=>{e===t.id&&N.splice(n,1)}))},F=e=>N.find((t=>t.id===e)),V=e=>{e.forEach((e=>{e.wins=0,e.draws=0,e.losses=0,e.leaguePoints=0})),N.forEach((e=>{e.teams.forEach((e=>{let t=m(e.id);t&&("win"===e.result?t.wins++:"loss"===e.result?t.losses++:"draw"===e.result&&t.draws++,t.leaguePoints+=e.leaguePoints)}))}))},G=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},K=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):null},Q=(e,t,n)=>{G("teams",e.getTeams()),G("matches",t.getMatches()),G("bonuses",n.getBonuses())};let W=A("Fully Painted Team","underdog",1,1),X=A("Vulgar Display of Power","opponent casualties",3,3),Y=A("Aerial Domination","passes",3,3),Z=A("Clean Sheet","opponent TDs",0,3),ee=A('"It\'s Not the Size of the Dog..."',"underdog",1,3);x(W),x(X),x(Y),x(Z),x(ee),document.addEventListener("DOMContentLoaded",(()=>{((e,t,n)=>{const s=K("teams"),o=K("matches"),a=K("bonuses");s&&e.setTeams(r(s)),o&&t.setMatches(o),a&&n.setBonuses(a)})(t,s,n),V(a()),p(),D(),h(a()),f(R())}));const te=document.getElementById("team-dialog"),ne=document.querySelector("#team-form #name-input"),se=document.querySelector("#team-form #ticker-input");document.getElementById("new-team-btn").onclick=()=>{D(),te.showModal()},document.getElementById("cancel-team-btn").onclick=()=>te.close(),ne.addEventListener("input",(()=>{const e=ne.value.trim().split(/\s+/).map((e=>e[0]?.toUpperCase()||"")).join("");se.value=e.slice(0,3)})),document.querySelector("#add-team-btn").addEventListener("click",(e=>{e.preventDefault();const o=ne.value,l=se.value,r=document.querySelector("#team-form #race-input").value,i=document.querySelector("#team-form #coach-input").value,m=d(o,r,i,l);c(m),Q(t,s,n),h(a()),te.close()}));const oe=document.getElementById("match-dialog");document.getElementById("new-match-btn").onclick=()=>{var e;e=a(),E.innerHTML='<option value="">-- Select Team --</option>',v.innerHTML='<option value="">-- Select Team --</option>',e.forEach((e=>{const t=document.createElement("option");t.value=e.id,t.textContent=`${e.name} (${e.ticker})`,E.appendChild(t.cloneNode(!0)),v.appendChild(t.cloneNode(!0))})),D(),oe.showModal()},document.getElementById("cancel-match-btn").onclick=()=>oe.close(),document.querySelector("#add-match-btn").addEventListener("click",(e=>{e.preventDefault();const o=document.querySelector("#home-select").value,l=document.querySelector("#away-select").value;if(o===l)return void alert("A team cannot play against itself.");const d=e=>document.querySelector(`[name="${e}"]`).value,r=J(o,l,d("homeTDs"),d("awayTDs"),d("homePasses"),d("awayPasses"),d("homeCasualties"),d("awayCasualties"),d("homePainted"),d("awayPainted"),d("homeUnderdog"),d("awayUnderdog"),d("date"));_(r),V(a()),p(),Q(t,s,n),h(a()),f(R()),oe.close()})),document.querySelector("#teams tbody").addEventListener("click",(e=>{const t=e.target.closest("tr");if(t?.dataset.teamId){const e=m(t.dataset.teamId);e&&(e=>{e&&(k=e.id,b.innerHTML=`\n        <p><strong>Name:</strong> ${e.name}</p>\n        <p><strong>Race:</strong> ${e.race}</p>\n        <p><strong>Coach:</strong> ${e.coach}</p>\n        <p><strong>Ticker:</strong> ${e.ticker}</p>\n        <p><strong>Record:</strong> ${e.wins}-${e.draws}-${e.losses}</p>\n        <p><strong>League Points:</strong> ${e.leaguePoints}</p>\n        <p><strong>Rank:</strong> ${e.rank}</p>\n    `,w.showModal())})(e)}})),document.querySelector("#matches tbody").addEventListener("click",(e=>{const t=e.target.closest("tr");if(t?.dataset.matchId){const e=R().find((e=>e.id===t.dataset.matchId));if(e){const t=e.teams.find((e=>e.isHome)),n=e.teams.find((e=>!e.isHome));((e,t,n)=>{if(!e)return;C=e.id;const[s,o]=e.teams,a=e=>e&&0!==e.length?e.map((e=>`<li>${e}</li>`)).join(""):"<li>No bonuses earned.</li>";B.innerHTML=`\n        <div class="match-details-grid">\n        <div class="match-team-block">\n            <h4>${t?.name||"Unknown"} <span class="label">Home</span></h4>\n            <p><strong>TDs:</strong> ${s.tds}</p>\n            <p><strong>Casualties:</strong> ${s.casualties}</p>\n            <p><strong>Passes:</strong> ${s.passes}</p>\n            <p><strong>Result:</strong> ${M(s.result)}</p>\n            <p><strong>League Points:</strong> ${s.leaguePoints}</p>\n            <p><strong>Bonuses:</strong></p>\n            <ul>${a(s.bonusesApplied)}</ul>\n        </div>\n\n        <div class="match-team-block">\n            <h4>${n?.name||"Unknown"} <span class="label">Away</span></h4>\n            <p><strong>TDs:</strong> ${o.tds}</p>\n            <p><strong>Casualties:</strong> ${o.casualties}</p>\n            <p><strong>Passes:</strong> ${o.passes}</p>\n            <p><strong>Result:</strong> ${M(o.result)}</p>\n            <p><strong>League Points:</strong> ${o.leaguePoints}</p>\n            <p><strong>Bonuses:</strong></p>\n            <ul>${a(o.bonusesApplied)}</ul>\n        </div>\n        </div>\n\n        <p style="text-align:center; margin-top:1rem;"><strong>Date:</strong> ${e.date}</p>\n    `,$.showModal()})(e,m(t.id),m(n.id))}}})),document.getElementById("delete-team-btn").addEventListener("click",(()=>{u(k),p(),Q(t,s,n),h(a()),f(R()),document.getElementById("team-details-dialog").close()})),document.getElementById("delete-match-btn").addEventListener("click",(()=>{z(C),V(a()),p(),Q(t,s,n),f(R()),h(a()),document.getElementById("match-details-dialog").close()}))})();
//# sourceMappingURL=main.js.map