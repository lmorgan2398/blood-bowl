(()=>{"use strict";var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{addTeam:()=>r,assignRanks:()=>p,createTeam:()=>l,getTeamByID:()=>m,getTeamByTicker:()=>i,getTeams:()=>a,rehydrateTeams:()=>c,removeTeamByID:()=>u,setTeams:()=>d});var n={};e.r(n),e.d(n,{addBonus:()=>$,applyBonuses:()=>C,createBonus:()=>b,getBonuses:()=>f,removeBonusByID:()=>w,setBonuses:()=>v});var s={};e.r(s),e.d(s,{addMatch:()=>V,createMatch:()=>F,getMatchByID:()=>K,getMatches:()=>_,removeMatchByID:()=>G,setMatches:()=>z,updateRecords:()=>Q});let o=[];const a=()=>o,d=e=>o=e,l=(e,t,n,s)=>{let o=crypto.randomUUID();return{name:e,race:t,coach:n,ticker:s,wins:0,draws:0,losses:0,leaguePoints:0,rank:1,get record(){return`${this.wins}-${this.draws}-${this.losses}`},id:o}},c=e=>e.map((e=>{const t=l(e.name,e.race,e.coach,e.ticker);return t.id=e.id,t.wins=e.wins,t.draws=e.draws,t.losses=e.losses,t.leaguePoints=e.leaguePoints,t.rank=e.rank??null,t})),r=e=>o.push(e),i=e=>o.find((t=>t.ticker===e)),m=e=>o.find((t=>t.id===e)),u=e=>{o.forEach(((t,n)=>{e===t.id&&o.splice(n,1)}))},p=()=>{let e=Array.from(o);for(let t=0;t<e.length;t++){let n=e[t].leaguePoints,s=t;for(let o=t+1;o<e.length;o++)e[o].leaguePoints>n&&(n=e[o].leaguePoints,s=o);let o=e[s];e[s]=e[t],e[t]=o}e.forEach(((e,t)=>{e.rank=t+1})),console.log(e),d(e)},g=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},h=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):null},y=(e,t,n)=>{g("teams",e.getTeams()),g("matches",t.getMatches()),g("bonuses",n.getBonuses())};let E=[];const f=()=>E,v=e=>E=e,b=(e,t,n,s)=>({name:e,type:t,count:n,points:s,id:crypto.randomUUID()}),$=e=>E.push(e),w=e=>{E.forEach(((t,n)=>{e===t.id&&E.splice(n,1)}))},C=(e,t,n,s,o)=>{let a=0,d=[];return E.forEach((l=>{if(!1===l.active)return;const c="opponent TDs"==l.type&&e<=l.count||"opponent casualties"==l.type&&t>=l.count||"passes"==l.type&&n>=l.count,r="painted"==l.type&&s||"underdog"==l.type&&o;c?(a+=l.points,d.push(`${l.name}: +${l.points} points for ${l.count} ${l.type}`)):r&&(a+=l.points,d.push(`${l.name}: +${l.points} points`))})),{points:a,appliedBonuses:d}};let k=document.querySelector("#teams tbody");const B=e=>{for(;k.firstChild;)k.removeChild(k.firstChild);e.forEach((e=>{let t=document.createElement("tr");k.appendChild(t),t.dataset.teamId=e.id;let n=document.createElement("td");t.appendChild(n),n.textContent=e.rank;let s=document.createElement("td");t.appendChild(s),s.textContent=e.name;let o=document.createElement("td");t.appendChild(o),o.textContent=e.record;let a=document.createElement("td");t.appendChild(a),a.textContent=e.leaguePoints}))};let I=document.querySelector("#matches tbody");const P=e=>{for(;I.firstChild;)I.removeChild(I.firstChild);e.forEach((e=>{const t=document.createElement("tr");I.appendChild(t),t.dataset.matchId=e.id;const n=e.teams.find((e=>e.isHome)),s=e.teams.find((e=>!e.isHome)),o=m(n.id)?.name||"Unknown",a=m(s.id)?.name||"Unknown",d=document.createElement("td");d.textContent=o,t.appendChild(d);const l=document.createElement("td");l.textContent=`${n.tds}-${s.tds}`,t.appendChild(l);const c=document.createElement("td");c.textContent=a,t.appendChild(c)}))},S=document.getElementById("home-select"),T=document.getElementById("away-select"),L=document.getElementById("team-details-dialog"),D=document.getElementById("match-details-dialog"),M=document.getElementById("team-details-body"),q=document.getElementById("match-details-body");let x=null,U=null;const A=document.querySelectorAll("input"),H=document.querySelectorAll('input[type="number"]'),O=document.querySelectorAll("select"),N=document.querySelectorAll('input[type="checkbox"]'),R=()=>{A.forEach((e=>{e.value=" "})),H.forEach((e=>{e.value=0})),O.forEach((e=>{e.selectedIndex=0})),N.forEach((e=>{e.checked=!1}))},j=e=>e.charAt(0).toUpperCase()+e.slice(1);let J=[];const _=()=>J,z=e=>J=e,F=(e,t,n,s,o,a,d,l,c,r,i,m,u)=>{let p=crypto.randomUUID(),g="draw",h="draw",y=0,E=0;n>s?(g="win",y+=3,h="loss",E+=1):n<s?(g="loss",y+=1,h="win",E+=3):(y+=2,E+=2);let f=C(s,l,o,c,i),v=C(n,d,a,r,m),b=f.points,$=E+v.points;return{date:u,id:p,teams:[{id:e,tds:n,casualties:d,passes:o,result:g,basePoints:y,leaguePoints:y+b,bonusesApplied:f.appliedBonuses,isHome:!0},{id:t,tds:s,casualties:l,passes:a,result:h,basePoints:E,leaguePoints:$,bonusesApplied:v.appliedBonuses,isHome:!1}]}},V=e=>J.push(e),G=e=>{J.forEach(((t,n)=>{e===t.id&&J.splice(n,1)}))},K=e=>J.find((t=>t.id===e)),Q=e=>{e.forEach((e=>{e.wins=0,e.draws=0,e.losses=0,e.leaguePoints=0})),J.forEach((e=>{e.teams.forEach((e=>{let t=m(e.id);t&&("win"===e.result?t.wins++:"loss"===e.result?t.losses++:"draw"===e.result&&t.draws++,t.leaguePoints+=e.leaguePoints)}))}))};let W=b("Fully Painted Team","painted",1,1),X=b("Vulgar Display of Power","opponent casualties",3,3),Y=b("Aerial Domination","passes",3,3),Z=b("Clean Sheet","opponent TDs",0,3),ee=b('"It\'s Not the Size of the Dog..."',"underdog",1,3);document.addEventListener("DOMContentLoaded",(()=>{((e,t,n)=>{const s=h("teams"),o=h("matches"),a=h("bonuses");s&&e.setTeams(c(s)),o&&t.setMatches(o),a&&n.setBonuses(a)})(t,s,n),0===f().length&&($(W),$(X),$(Y),$(Z),$(ee)),(()=>{const e=document.getElementById("bonus-toggle-form");e.innerHTML="",f().forEach((t=>{const n=document.createElement("div");n.classList.add("bonus-toggle-label");const s=document.createElement("div");s.classList.add("bonus-toggle-top");const o=document.createElement("input");o.type="checkbox",o.name="bonusToggle",o.value=t.id,o.checked=t.active??!0,o.addEventListener("change",(e=>{t.active=e.target.checked,g("bonuses",f())}));const a=document.createElement("span");a.textContent=t.name,s.appendChild(o),s.appendChild(a);const d=document.createElement("div");d.classList.add("bonus-detail");let l="";l=["painted","underdog"].includes(t.type)?`${t.points} points`:`${t.points} points â€“ ${t.count} ${t.type}`,d.textContent=l,n.addEventListener("click",(e=>{e.target!==o&&d.classList.toggle("show")})),n.appendChild(s),n.appendChild(d),e.appendChild(n)}))})(),Q(a()),p(),R(),B(a()),P(_())}));const te=document.getElementById("team-dialog"),ne=document.querySelector("#team-form #name-input"),se=document.querySelector("#team-form #ticker-input");document.getElementById("new-team-btn").onclick=()=>{R(),te.showModal()},document.getElementById("cancel-team-btn").onclick=()=>te.close(),ne.addEventListener("input",(()=>{const e=ne.value.trim().split(/\s+/).map((e=>e[0]?.toUpperCase()||"")).join("");se.value=e.slice(0,3)})),document.querySelector("#add-team-btn").addEventListener("click",(e=>{e.preventDefault();const o=ne.value,d=se.value,c=document.querySelector("#team-form #race-input").value,i=document.querySelector("#team-form #coach-input").value,m=l(o,c,i,d);r(m),y(t,s,n),B(a()),te.close()}));const oe=document.getElementById("match-dialog");document.getElementById("new-match-btn").onclick=()=>{var e;e=a(),S.innerHTML='<option value="">-- Select Team --</option>',T.innerHTML='<option value="">-- Select Team --</option>',e.forEach((e=>{const t=document.createElement("option");t.value=e.id,t.textContent=`${e.name} (${e.ticker})`,S.appendChild(t.cloneNode(!0)),T.appendChild(t.cloneNode(!0))})),R(),oe.showModal()},document.getElementById("cancel-match-btn").onclick=()=>oe.close(),document.querySelector("#add-match-btn").addEventListener("click",(e=>{e.preventDefault();const o=document.querySelector("#home-select").value,d=document.querySelector("#away-select").value;if(o===d)return void alert("A team cannot play against itself.");const l=e=>{const t=document.querySelector(`[name="${e}"]`);return"checkbox"===t.type?t.checked:t.value},c=F(o,d,l("homeTDs"),l("awayTDs"),l("homePasses"),l("awayPasses"),l("homeCasualties"),l("awayCasualties"),l("homePainted"),l("awayPainted"),l("homeUnderdog"),l("awayUnderdog"),l("date"));V(c),Q(a()),p(),y(t,s,n),B(a()),P(_()),oe.close()})),document.querySelector("#teams tbody").addEventListener("click",(e=>{const t=e.target.closest("tr");if(t?.dataset.teamId){const e=m(t.dataset.teamId);e&&(e=>{e&&(x=e.id,M.innerHTML=`\n        <p><strong>Name:</strong> ${e.name}</p>\n        <p><strong>Race:</strong> ${e.race}</p>\n        <p><strong>Coach:</strong> ${e.coach}</p>\n        <p><strong>Ticker:</strong> ${e.ticker}</p>\n        <p><strong>Record:</strong> ${e.wins}-${e.draws}-${e.losses}</p>\n        <p><strong>League Points:</strong> ${e.leaguePoints}</p>\n        <p><strong>Rank:</strong> ${e.rank}</p>\n    `,L.showModal())})(e)}})),document.querySelector("#matches tbody").addEventListener("click",(e=>{const t=e.target.closest("tr");if(t?.dataset.matchId){const e=_().find((e=>e.id===t.dataset.matchId));if(e){const t=e.teams.find((e=>e.isHome)),n=e.teams.find((e=>!e.isHome));((e,t,n)=>{if(!e)return;U=e.id;const[s,o]=e.teams,a=e=>e&&0!==e.length?e.map((e=>`<li>${e}</li>`)).join(""):"<li>No bonuses earned.</li>";q.innerHTML=`\n        <div class="match-details-grid">\n        <div class="match-team-block">\n            <h4>${t?.name||"Unknown"} <span class="label">Home</span></h4>\n            <p><strong>TDs:</strong> ${s.tds}</p>\n            <p><strong>Casualties:</strong> ${s.casualties}</p>\n            <p><strong>Passes:</strong> ${s.passes}</p>\n            <p><strong>Result:</strong> ${j(s.result)} (+${s.basePoints} points)</p>\n            <p><strong>League Points:</strong> ${s.leaguePoints}</p>\n            <p><strong>Bonuses:</strong></p>\n            <ul>${a(s.bonusesApplied)}</ul>\n        </div>\n\n        <div class="match-team-block">\n            <h4>${n?.name||"Unknown"} <span class="label">Away</span></h4>\n            <p><strong>TDs:</strong> ${o.tds}</p>\n            <p><strong>Casualties:</strong> ${o.casualties}</p>\n            <p><strong>Passes:</strong> ${o.passes}</p>\n            <p><strong>Result:</strong> ${j(o.result)} (+${o.basePoints} points)</p>\n            <p><strong>League Points:</strong> ${o.leaguePoints}</p>\n            <p><strong>Bonuses:</strong></p>\n            <ul>${a(o.bonusesApplied)}</ul>\n        </div>\n        </div>\n\n        <p style="text-align:center; margin-top:1rem;"><strong>Date:</strong> ${e.date}</p>\n    `,D.showModal()})(e,m(t.id),m(n.id))}}})),document.getElementById("delete-team-btn").addEventListener("click",(()=>{u(x),p(),y(t,s,n),B(a()),P(_()),document.getElementById("team-details-dialog").close()})),document.getElementById("delete-match-btn").addEventListener("click",(()=>{G(U),Q(a()),p(),y(t,s,n),P(_()),B(a()),document.getElementById("match-details-dialog").close()}))})();
//# sourceMappingURL=main.js.map