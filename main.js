(()=>{"use strict";var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{addTeam:()=>c,assignRanks:()=>p,createTeam:()=>l,getTeamByID:()=>m,getTeamByTicker:()=>i,getTeams:()=>a,rehydrateTeams:()=>r,removeTeamByID:()=>u,setTeams:()=>d});var n={};e.r(n),e.d(n,{addBonus:()=>M,applyBonuses:()=>U,createBonus:()=>D,getBonuses:()=>T,removeBonusByID:()=>L,setBonuses:()=>S});var s={};e.r(s),e.d(s,{addMatch:()=>O,createMatch:()=>A,getMatchByID:()=>R,getMatches:()=>H,removeMatchByID:()=>N,setMatches:()=>x,updateRecords:()=>j});let o=[];const a=()=>o,d=e=>o=e,l=(e,t,n,s)=>{let o=crypto.randomUUID();return{name:e,race:t,coach:n,ticker:s,wins:0,draws:0,losses:0,leaguePoints:0,rank:1,get record(){return`${this.wins}-${this.draws}-${this.losses}`},id:o}},r=e=>e.map((e=>{const t=l(e.name,e.race,e.coach,e.ticker);return t.id=e.id,t.wins=e.wins,t.draws=e.draws,t.losses=e.losses,t.leaguePoints=e.leaguePoints,t.rank=e.rank??null,t})),c=e=>o.push(e),i=e=>o.find((t=>t.ticker===e)),m=e=>o.find((t=>t.id===e)),u=e=>{o.forEach(((t,n)=>{e===t.id&&o.splice(n,1)}))},p=()=>{let e=Array.from(o);for(let t=0;t<e.length;t++){let n=e[t].leaguePoints,s=t;for(let o=t+1;o<e.length;o++)e[o].leaguePoints>n&&(n=e[o].leaguePoints,s=o);let o=e[s];e[s]=e[t],e[t]=o}e.forEach(((e,t)=>{e.rank=t+1})),console.log(e),d(e)};let g=document.querySelector("#teams tbody");const h=e=>{for(;g.firstChild;)g.removeChild(g.firstChild);e.forEach((e=>{let t=document.createElement("tr");g.appendChild(t),t.dataset.teamId=e.id;let n=document.createElement("td");t.appendChild(n),n.textContent=e.rank;let s=document.createElement("td");t.appendChild(s),s.textContent=e.name;let o=document.createElement("td");t.appendChild(o),o.textContent=e.record;let a=document.createElement("td");t.appendChild(a),a.textContent=e.leaguePoints}))};let y=document.querySelector("#matches tbody");const f=e=>{for(;y.firstChild;)y.removeChild(y.firstChild);e.forEach((e=>{const t=document.createElement("tr");y.appendChild(t),t.dataset.matchId=e.id;const n=e.teams.find((e=>e.isHome)),s=e.teams.find((e=>!e.isHome)),o=m(n.id)?.name||"Unknown",a=m(s.id)?.name||"Unknown",d=document.createElement("td");d.textContent=o,t.appendChild(d);const l=document.createElement("td");l.textContent=`${n.tds}-${s.tds}`,t.appendChild(l);const r=document.createElement("td");r.textContent=a,t.appendChild(r)}))},E=document.getElementById("home-select"),v=document.getElementById("away-select"),w=document.getElementById("team-details-dialog"),$=document.getElementById("match-details-dialog"),B=document.getElementById("team-details-body"),C=document.getElementById("match-details-body");let b=null,I=null;const k=e=>e.charAt(0).toUpperCase()+e.slice(1);let P=[];const T=()=>P,S=e=>P=e,D=(e,t,n,s)=>({name:e,type:t,count:n,points:s,id:crypto.randomUUID()}),M=e=>P.push(e),L=e=>{P.forEach(((t,n)=>{e===t.id&&P.splice(n,1)}))},U=(e,t,n,s,o)=>{let a=0,d=[];return P.forEach((l=>{const r="opponent TDs"==l.type&&e<=l.count||"opponent casualties"==l.type&&t>=l.count||"passes"==l.type&&n>=l.count,c="painted"==l.type&&s||"underdog"==l.type&&o;r?(a+=l.points,d.push(`${l.name}: +${l.points} points for ${l.count} ${l.type}`)):c&&d.push(`${l.name}: +${l.points} points`)})),{points:a,appliedBonuses:d}};let q=[];const H=()=>q,x=e=>q=e,A=(e,t,n,s,o,a,d,l,r,c,i,m,u)=>{let p=crypto.randomUUID(),g="draw",h="draw",y=0,f=0;n>s?(g="win",y+=3,h="loss",f+=1):n<s?(g="loss",y+=1,h="win",f+=3):(y+=2,f+=2);let E=U(s,l,o,r,i),v=U(n,d,a,c,m),w=E.points,$=f+v.points;return{date:u,id:p,teams:[{id:e,tds:n,casualties:d,passes:o,result:g,leaguePoints:y+w,bonusesApplied:E.appliedBonuses,isHome:!0},{id:t,tds:s,casualties:l,passes:a,result:h,leaguePoints:$,bonusesApplied:v.appliedBonuses,isHome:!1}]}},O=e=>q.push(e),N=e=>{q.forEach(((t,n)=>{e===t.id&&q.splice(n,1)}))},R=e=>q.find((t=>t.id===e)),j=e=>{e.forEach((e=>{e.wins=0,e.draws=0,e.losses=0,e.leaguePoints=0})),q.forEach((e=>{e.teams.forEach((e=>{let t=m(e.id);t&&("win"===e.result?t.wins++:"loss"===e.result?t.losses++:"draw"===e.result&&t.draws++,t.leaguePoints+=e.leaguePoints)}))}))},J=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},_=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):null},z=(e,t,n)=>{J("teams",e.getTeams()),J("matches",t.getMatches()),J("bonuses",n.getBonuses())};let F=D("Fully Painted Team","underdog",1,1),V=D("Vulgar Display of Power","opponent casualties",3,3),G=D("Aerial Domination","passes",3,3),K=D("Clean Sheet","opponent TDs",0,3),Q=D('"It\'s Not the Size of the Dog..."',"underdog",1,3);M(F),M(V),M(G),M(K),M(Q),document.addEventListener("DOMContentLoaded",(()=>{((e,t,n)=>{const s=_("teams"),o=_("matches"),a=_("bonuses");s&&e.setTeams(r(s)),o&&t.setMatches(o),a&&n.setBonuses(a)})(t,s,n),j(a()),p(),h(a()),f(H())}));const W=document.getElementById("team-dialog"),X=document.querySelector("#team-form #name-input"),Y=document.querySelector("#team-form #ticker-input");document.getElementById("new-team-btn").onclick=()=>W.showModal(),document.getElementById("cancel-team-btn").onclick=()=>W.close(),X.addEventListener("input",(()=>{const e=X.value.trim().split(/\s+/).map((e=>e[0]?.toUpperCase()||"")).join("");Y.value=e.slice(0,3)})),document.querySelector("#add-team-btn").addEventListener("click",(e=>{e.preventDefault();const o=X.value,d=Y.value,r=document.querySelector("#team-form #race-input").value,i=document.querySelector("#team-form #coach-input").value,m=l(o,r,i,d);c(m),z(t,s,n),h(a()),W.close()}));const Z=document.getElementById("match-dialog");document.getElementById("new-match-btn").onclick=()=>{var e;e=a(),E.innerHTML='<option value="">-- Select Team --</option>',v.innerHTML='<option value="">-- Select Team --</option>',e.forEach((e=>{const t=document.createElement("option");t.value=e.id,t.textContent=`${e.name} (${e.ticker})`,E.appendChild(t.cloneNode(!0)),v.appendChild(t.cloneNode(!0))})),Z.showModal()},document.getElementById("cancel-match-btn").onclick=()=>Z.close(),document.querySelector("#add-match-btn").addEventListener("click",(e=>{e.preventDefault();const o=document.querySelector("#home-select").value,d=document.querySelector("#away-select").value;if(o===d)return void alert("A team cannot play against itself.");const l=e=>document.querySelector(`[name="${e}"]`).value,r=A(o,d,l("homeTDs"),l("awayTDs"),l("homePasses"),l("awayPasses"),l("homeCasualties"),l("awayCasualties"),l("homePainted"),l("awayPainted"),l("homeUnderdog"),l("awayUnderdog"),l("date"));O(r),j(a()),p(),z(t,s,n),h(a()),f(H()),Z.close()})),document.querySelector("#teams tbody").addEventListener("click",(e=>{const t=e.target.closest("tr");if(t?.dataset.teamId){const e=m(t.dataset.teamId);e&&(e=>{e&&(b=e.id,B.innerHTML=`\n        <p><strong>Name:</strong> ${e.name}</p>\n        <p><strong>Race:</strong> ${e.race}</p>\n        <p><strong>Coach:</strong> ${e.coach}</p>\n        <p><strong>Ticker:</strong> ${e.ticker}</p>\n        <p><strong>Record:</strong> ${e.wins}-${e.draws}-${e.losses}</p>\n        <p><strong>League Points:</strong> ${e.leaguePoints}</p>\n        <p><strong>Rank:</strong> ${e.rank}</p>\n    `,w.showModal())})(e)}})),document.querySelector("#matches tbody").addEventListener("click",(e=>{const t=e.target.closest("tr");if(t?.dataset.matchId){const e=H().find((e=>e.id===t.dataset.matchId));if(e){const t=e.teams.find((e=>e.isHome)),n=e.teams.find((e=>!e.isHome));((e,t,n)=>{if(!e)return;I=e.id;const[s,o]=e.teams,a=e=>e&&0!==e.length?e.map((e=>`<li>${e}</li>`)).join(""):"<li>No bonuses earned.</li>";C.innerHTML=`\n        <div class="match-details-grid">\n        <div class="match-team-block">\n            <h4>${t?.name||"Unknown"} <span class="label">Home</span></h4>\n            <p><strong>TDs:</strong> ${s.tds}</p>\n            <p><strong>Casualties:</strong> ${s.casualties}</p>\n            <p><strong>Passes:</strong> ${s.passes}</p>\n            <p><strong>Result:</strong> ${k(s.result)}</p>\n            <p><strong>League Points:</strong> ${s.leaguePoints}</p>\n            <p><strong>Bonuses:</strong></p>\n            <ul>${a(s.bonusesApplied)}</ul>\n        </div>\n\n        <div class="match-team-block">\n            <h4>${n?.name||"Unknown"} <span class="label">Away</span></h4>\n            <p><strong>TDs:</strong> ${o.tds}</p>\n            <p><strong>Casualties:</strong> ${o.casualties}</p>\n            <p><strong>Passes:</strong> ${o.passes}</p>\n            <p><strong>Result:</strong> ${k(o.result)}</p>\n            <p><strong>League Points:</strong> ${o.leaguePoints}</p>\n            <p><strong>Bonuses:</strong></p>\n            <ul>${a(o.bonusesApplied)}</ul>\n        </div>\n        </div>\n\n        <p style="text-align:center; margin-top:1rem;"><strong>Date:</strong> ${e.date}</p>\n    `,$.showModal()})(e,m(t.id),m(n.id))}}})),document.getElementById("delete-team-btn").addEventListener("click",(()=>{u(b),p(),z(t,s,n),h(a()),f(H()),document.getElementById("team-details-dialog").close()})),document.getElementById("delete-match-btn").addEventListener("click",(()=>{N(I),j(a()),p(),z(t,s,n),f(H()),h(a()),document.getElementById("match-details-dialog").close()}))})();
//# sourceMappingURL=main.js.map