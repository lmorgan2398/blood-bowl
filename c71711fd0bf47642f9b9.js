import"./styles.css";import*as teams from"./teams.js";import*as display from"./display.js";import*as bonuses from"./bonuses.js";import*as matches from"./matches.js";import*as storage from"./storage.js";let bonus1=bonuses.createBonus("Fully Painted Team","underdog",1,1),bonus2=bonuses.createBonus("Vulgar Display of Power","opponent casualties",3,3),bonus3=bonuses.createBonus("Aerial Domination","passes",3,3),bonus4=bonuses.createBonus("Clean Sheet","opponent TDs",0,3),bonus5=bonuses.createBonus('"It\'s Not the Size of the Dog..."',"underdog",1,3);bonuses.addBonus(bonus1),bonuses.addBonus(bonus2),bonuses.addBonus(bonus3),bonuses.addBonus(bonus4),bonuses.addBonus(bonus5),document.addEventListener("DOMContentLoaded",(()=>{storage.loadAll(teams,matches,bonuses),matches.updateRecords(teams.getTeams()),teams.assignRanks(),display.displayTeams(teams.getTeams()),display.displayMatches(matches.getMatches())}));const teamDialog=document.getElementById("team-dialog"),newTeamNameInput=document.querySelector("#team-form #name-input"),newTeamTickerInput=document.querySelector("#team-form #ticker-input");document.getElementById("new-team-btn").onclick=()=>teamDialog.showModal(),document.getElementById("cancel-team-btn").onclick=()=>teamDialog.close(),newTeamNameInput.addEventListener("input",(()=>{const e=newTeamNameInput.value.trim().split(/\s+/).map((e=>e[0]?.toUpperCase()||"")).join("");newTeamTickerInput.value=e.slice(0,3)})),document.querySelector("#add-team-btn").addEventListener("click",(e=>{e.preventDefault();const t=newTeamNameInput.value,a=newTeamTickerInput.value,s=document.querySelector("#team-form #race-input").value,m=document.querySelector("#team-form #coach-input").value,o=teams.createTeam(t,s,m,a);teams.addTeam(o),storage.saveAll(teams,matches,bonuses),display.displayTeams(teams.getTeams()),teamDialog.close()}));const matchDialog=document.getElementById("match-dialog");document.getElementById("new-match-btn").onclick=()=>{display.populateTeamSelects(teams.getTeams()),matchDialog.showModal()},document.getElementById("cancel-match-btn").onclick=()=>matchDialog.close(),document.querySelector("#add-match-btn").addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector("#home-select").value,a=document.querySelector("#away-select").value;if(t===a)return void alert("A team cannot play against itself.");const s=e=>document.querySelector(`[name="${e}"]`).value,m=matches.createMatch(t,a,s("homeTDs"),s("awayTDs"),s("homePasses"),s("awayPasses"),s("homeCasualties"),s("awayCasualties"),s("homePainted"),s("awayPainted"),s("homeUnderdog"),s("awayUnderdog"),s("date"));matches.addMatch(m),matches.updateRecords(teams.getTeams()),teams.assignRanks(),storage.saveAll(teams,matches,bonuses),display.displayTeams(teams.getTeams()),display.displayMatches(matches.getMatches()),matchDialog.close()})),document.querySelector("#teams tbody").addEventListener("click",(e=>{const t=e.target.closest("tr");if(t?.dataset.teamId){const e=teams.getTeamByID(t.dataset.teamId);e&&display.showTeamDetails(e)}})),document.querySelector("#matches tbody").addEventListener("click",(e=>{const t=e.target.closest("tr");if(t?.dataset.matchId){const e=matches.getMatches().find((e=>e.id===t.dataset.matchId));if(e){const t=e.teams.find((e=>e.isHome)),a=e.teams.find((e=>!e.isHome)),s=teams.getTeamByID(t.id),m=teams.getTeamByID(a.id);display.showMatchDetails(e,s,m)}}})),document.getElementById("delete-team-btn").addEventListener("click",(()=>{teams.removeTeamByID(display.selectedTeamID),teams.assignRanks(),storage.saveAll(teams,matches,bonuses),display.displayTeams(teams.getTeams()),display.displayMatches(matches.getMatches()),document.getElementById("team-details-dialog").close()})),document.getElementById("delete-match-btn").addEventListener("click",(()=>{matches.removeMatchByID(display.selectedMatchID),matches.updateRecords(teams.getTeams()),teams.assignRanks(),storage.saveAll(teams,matches,bonuses),display.displayMatches(matches.getMatches()),display.displayTeams(teams.getTeams()),document.getElementById("match-details-dialog").close()}));